<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title>北京现代 DMS</title>
<link rel="stylesheet" type="text/css" href="../../css/kendo/kendo.common.min.css">
<link rel="stylesheet" type="text/css" href="../../css/kendo/kendo.default.min.css">
<link rel="stylesheet" type="text/css" href="../../css/common.css">
<link rel="stylesheet" type="text/css" href="../../css/tablet.css">
<style>
.k-scheduler-edit-form .k-edit-form-container, .k-scheduler-timezones .k-edit-form-container { width:520px;}
.k-window>div.k-popup-edit-form { padding:1em 0;}
.k-edit-form-container .k-edit-buttons { display:block;}
</style>
<script type="text/javascript" src="../../js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="../../js/kendo/kendo.all.min2.js"></script>
<!--[if lt IE 9]>
    <script src="../../js/html5shiv.js"></script>
<![endif]-->
</head>
<body>
<!-- wrap -->
<div id="wrap">
    <!-- header -->
    <header id="header"></header>
    <!-- //header -->

    <!-- container -->
    <div id="container">
        <!-- content -->
        <section id="content">


            <!-- 작업할당 -->
            <div class="header_area">
                <h1 class="title_basic">작업할당</h1>
                <div class="btn_right">
                    <div class="cal_state">
                        <span class="s1">대기 15</span>
                        <span class="s2">진행 15</span>
                        <span class="s3">연기 15</span>
                        <span class="s4">완료 0</span>
                    </div>
                    <button class="btn_m btn_search">조회</button>
                </div>
            </div>

            <div class="work_scheduler">
                <!-- details_area -->
                <div class="details_area">
                    <a href="javascript:;" class="details_btn"><!-- details_btn --></a>
                    <div class="details_body">
                        <div class="details_top">
                            <div class="form_search">
                                <input type="text" value="" class="form_input">
                                <a href="javascript:;">검색</a>
                            </div>
                        </div>
                        <div class="details_con">
                            <div class="table_grid wa_grid">
                                <table class="grid">
                                    <caption></caption>
                                    <colgroup>
                                    <col>
                                    <col style="width:90px;">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col" data-field="data1">RO번호<br>VIN</th>
                                            <th scope="col" class="ac" data-field="data2">차량등록번호<br>수리상태</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                        <tr>
                                            <td>RO2016080163-002<br>LBEDMBKD4CZ001389</td>
                                            <td class="ac">44호12312<br>수리상태</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="table_grid wa_grid2">
                                <table class="grid2">
                                    <caption></caption>
                                    <colgroup>
                                    <col style="width:44px;">
                                    <col style="width:80px;">
                                    <col>
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th scope="col" data-field="data1">
                                                <label class="list_check"><input type="checkbox" class="form_check"><span class="label_txt"></span></label>
                                            </th>
                                            <th scope="col" data-field="data2">공임코드</th>
                                            <th scope="col" data-field="data3">정비항목</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="ac">
                                                <label class="list_check"><input type="checkbox" class="form_check"><span class="label_txt"></span></label>
                                            </td>
                                            <td class="ac">50CJ11R1</td>
                                            <td class="ac">정비항목</td>
                                        </tr>
                                        <tr>
                                            <td class="ac">
                                                <label class="list_check"><input type="checkbox" class="form_check"><span class="label_txt"></span></label>
                                            </td>
                                            <td class="ac">50CJ11R1</td>
                                            <td class="ac">정비항목</td>
                                        </tr>
                                        <tr>
                                            <td class="ac">
                                                <label class="list_check"><input type="checkbox" class="form_check"><span class="label_txt"></span></label>
                                            </td>
                                            <td class="ac">50CJ11R1</td>
                                            <td class="ac">정비항목</td>
                                        </tr>
                                        <tr>
                                            <td class="ac">
                                                <label class="list_check"><input type="checkbox" class="form_check"><span class="label_txt"></span></label>
                                            </td>
                                            <td class="ac">50CJ11R1</td>
                                            <td class="ac">정비항목</td>
                                        </tr>
                                        <tr>
                                            <td class="ac">
                                                <label class="list_check"><input type="checkbox" class="form_check"><span class="label_txt"></span></label>
                                            </td>
                                            <td class="ac">50CJ11R1</td>
                                            <td class="ac">정비항목</td>
                                        </tr>
                                        <tr>
                                            <td class="ac">
                                                <label class="list_check"><input type="checkbox" class="form_check"><span class="label_txt"></span></label>
                                            </td>
                                            <td class="ac">50CJ11R1</td>
                                            <td class="ac">정비항목</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- //details_area -->

                <!-- scheduler_area -->
                <div class="scheduler_area">
                    <div id="scheduler"></div>
                </div>
                <!-- //scheduler_area -->
            </div>
            <!-- //작업할당 -->


        </section>
        <!-- //content -->
    </div>
    <!-- //container -->

    <!-- footer -->
    <footer id="footer"></footer>
    <!-- //footer -->
</div>
<!-- //wrap -->

<!-- script -->
<script id="groupHeaderTemplate" type="text/x-kendo-template">
    <div class="groupHeader_th">
        <span class="th_txt">#=text#</span>
        <button type="button" class="th_btnAdd">+</button>
    </div>
</script>

<script id="work_event_template" type="text/x-kendo-template">
    <div class="work_event_template">#: title #</div>
</script>

<script id="scheduler_viewTooltip" type="text/x-kendo-template">
    <div class="scheduler_viewLayer">
        <div class="views_con">
            <h3>경NZ1234</h3>
            <p class="views_txt">DMS_8668</p>
            <div class="views_time">
                <p class="start_time">14:00</p>
                <p class="end_time">15:00</p>
            </div>
            <ul class="views_btn">
                <li class="btn_save"><a href="javascript:;">저장</a></li>
                <li class="btn_detail"><a href="javascript:;" class="k-tooltip-button">상세정보</a></li>
                <li class="btn_cancel"><a href="javascript:;">취소</a></li>
            </ul>
        </div>
        <a href="javascript:;" class="views_close k-tooltip-button">close</a>
    </div>
</script>

<script>
    $(document).ready(function() {
        $(".grid").kendoGrid({
            height: 345
        });
        $(".grid2").kendoGrid({
            height: 169
        });

        //scheduler
        $("#scheduler").kendoScheduler({
            date: new Date(),
            height: 600,
            allDaySlot: false,
            selectable: true,
            showWorkHours: true,
            footer: false,
            messages: {
                today: "오늘"
            },
            views: [{
                type: "timeline",
                eventHeight: 34,
                columnWidth: 30,
                minorTickCount: 6,
                eventTemplate: $("#work_event_template").html()
            }],
            editable: {
                create: false,
                update: false,
                destroy: false,
                //move: false,
                window: {
                    animation: false,
                },
            },
            dataSource: [{
                id: 1,
                start: new Date("2016/9/1 09:00"),
                end: new Date("2016/9/1 10:00"),
                title: "interview1",
                testId: 1
            },
            {
                id: 2,
                start: new Date("2016/9/1 09:20"),
                end: new Date("2016/9/1 10:20"),
                title: "interview2",
                testId: 1
            },
            {
                id: 3,
                start: new Date("2016/9/1 9:40"),
                end: new Date("2016/9/1 10:40"),
                title: "interview3",
                testId: 1
            },
            {
                id: 4,
                start: new Date("2016/9/1 10:00"),
                end: new Date("2016/9/1 11:00"),
                title: "interview4",
                testId: 4
            }],
            group: {
                resources: ["testId"],
                orientation: "vertical"
            },
            groupHeaderTemplate: $("#groupHeaderTemplate").html(),
            resources: [
                {
                    field: "testId",
                    dataSource: [
                        { text: "test1", value: 1 },
                        { text: "test2", value: 2 },
                        { text: "test3", value: 3 },
                        { text: "test4", value: 4 }
                    ],
                }
            ]
        });
        var scheduler = $("#scheduler").data("kendoScheduler");

        //details area show/hide
        $("a.details_btn").on("click", function(){
            var detailArea = $(this).parent("div.details_area");
            if(detailArea.hasClass("closed")){
                detailArea.removeClass("closed");
            }else{
                detailArea.addClass("closed");
            }
            scheduler.refresh();
        });

        //scheduler_viewLayer tooltip
        var tooltip = $("#scheduler").kendoTooltip({
            filter: ".work_event_template",
            show: add_class,
            autoHide: false,
            showOn: "click",
            position: "top",
            width: 186,
            height: 105,
            content: kendo.template($('#scheduler_viewTooltip').html())
        }).data("kendoTooltip");
    });

    //scheduler_viewLayer tooltip addClass
    function add_class() {
        this.popup.element.addClass("scheduler_tooltip");
    }
</script>
<!-- //script -->
</body>
</html>

