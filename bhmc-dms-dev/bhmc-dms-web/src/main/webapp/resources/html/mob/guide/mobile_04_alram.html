<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title>北京现代 DMS</title>
<link rel="stylesheet" type="text/css" href="../../../css/kendo/kendo.common.min.css">
<link rel="stylesheet" type="text/css" href="../../../css/mob/kendo.mobile.all.min.css">
<link rel="stylesheet" type="text/css" href="../../../css/mob/mdms.css">

<script type="text/javascript" src="../../../js/mob/jquery.min.js"></script>
<script type="text/javascript" src="../../../js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="../../../js/kendo/kendo.all.min.js"></script>
<script type="text/javascript" src="../../../js/mob/mpublish.js"></script>
</head>
<body>
<div id="mwrap">
    <!-- header -->
    <header id="header">
        <a href="#" class="allmenu">주요메뉴 열기</a>
        <h1>알림</h1>
        <a href="#" class="alarm">알람<span class="alarm_num" style="padding-right:5px"></span></a>
    </header>
    <!-- //header -->

    <!-- content -->
    <section id="content">
        <ul class="alarmlist">
            <li>
                <div class="alarmitem">
                    <span class="message">
                        <span class="date">2016-02-20 12:08:21</span>
                        <span class="">클릭하면 팝업 메시지가 나옵니다. </span>
                    </span>
                    <span class="check">미확인</span>
                    <span class="delitem">삭제</span>
                </div>
            </li>
            <li>
                <div class="alarmitem">
                    <span class="message">
                        <span class="date">2016-02-20 12:08:21</span>
                        <span class="">클릭하면 팝업 메시지가 나옵니다. </span>
                    </span>
                    <span class="check">미확인</span>
                    <span class="delitem">삭제</span>
                </div>
            </li>
            <li>
                <div class="alarmitem read">
                    <span class="message">
                        <span class="date">2016-02-20 12:08:21</span>
                        <span class="">클릭하면 팝업 메시지가 나옵니다. </span>
                    </span>
                    <span class="check">확인</span>
                    <span class="delitem">삭제</span>
                </div>
            </li>
        </ul>
    </section>

    <section class="lay_pop">
        <div class="lay_cont">
            <span class="date">2016-02-20 12:11:33</span>
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
                        안녕하세요. 메시지의 내용이 출력됩니다. 업무에 따른 메시지 입니다.
        </div>
        <div class="btnarea">
            <span class="btnd1" onclick="layerClose('.lay_pop')">닫기</span>
        </div>
    </section>

</div>

<!-- script -->
<script>

function msgDelBack(){
    var msgLi = $('.alarmitem').removeClass("delete");
    msgLi.children(".message").animate({left:0}, 400);
    msgLi.children(".delitem").animate({right:-80}, 400);
}

function msgDelete(thisMsg){
    if(thisMsg.hasClass("delete") === true){
       msgDelBack();
    }
    else{
       msgDelBack();
       thisMsg.addClass("delete");
       thisMsg.children(".message").animate({left:-80}, 400);
       thisMsg.children(".delitem").animate({right:0}, 400);
    }
}

$(document).ready(function() {

  //setup a timer and a flag variable
    var tapTimer, isTapHold = false;
    $('.alarmitem').bind('mousedown mouseup', function (event) {
        var thisMsg = $(this);
        if (event.type == 'mousedown') {
            //set the timer to run the `taphold` function in three seconds
            tapTimer = setTimeout(function () {
                isTapHold = true;
                msgDelete(thisMsg);
            }, 1000);
        } else {
            //event.type == 'vmouseup'
            //clear the timeout if it hasn't yet occured
            clearTimeout(tapTimer);
            //if the flag is set to false then this is a `tap` event
            if (!isTapHold) {
                //this is a tap, not a tap-hold
                pushLayer('.lay_pop');
                msgDelBack();
            }
            //reset flag
            isTapHold = false;
        }
    });

    $('.alarmitem .delitem').click(function(){
        $(this).parent().hide();
    });

});

</script>
<!-- //script -->
</body>
</html>
