<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="chn.bhmc.dms.sal.fas.service.dao.CoercionApprovalDAO">

    <!-- 강제판매승인 목록 갯수  -->
    <select id="selectCoercionApprovalsByConditionCnt" parameterType="CoercionApprovalSearchVO" resultType="int">
        SELECT COUNT(*) AS VALUE
          FROM SA_0421T A
          INNER JOIN (
                      SELECT DLR_CD, VIN_NO1, VIN_NO2
                           , MAX(SEQ) AS SEQ
                        FROM SA_0421T
                       GROUP BY DLR_CD, VIN_NO1, VIN_NO2
                     ) A1
             ON A.DLR_CD = A1.DLR_CD
            AND A.VIN_NO1 = A1.VIN_NO1
            AND A.VIN_NO2 = A1.VIN_NO2
            AND A.SEQ = A1.SEQ
          INNER JOIN SA_0121T B
             ON A.VIN_NO1 = B.VIN_NO1
            AND A.VIN_NO2 = B.VIN_NO2
          INNER JOIN CM_0101T C
             ON A.DLR_CD = C.DLR_CD
          <!-- 20201224 Q20122300005 增加筛选条件“是否有发票” ,关联发票表 update by sunzq3 start -->
          LEFT OUTER JOIN (
		                        SELECT * FROM (
			                           SELECT 
			                               A.*
			                               , ROW_NUMBER() OVER(PARTITION BY A.VIN_NO ORDER BY A.RECEIPT_ISS_DT DESC) NO
			                            FROM (    
			                              SELECT 
			                               C.*
			                              ,CASE WHEN TO_NUMBER(NVL(C.CERT_FST,0)) !=1  THEN 0 ELSE 1  END AS CERT_FSTM
			                              ,CASE WHEN TO_NUMBER(NVL(C.CERT_2ND,0)) !=1  THEN 0 ELSE 1 END  AS CERT_2NDM
			                              FROM SA_0501T C 
			                               WHERE   1=1
			                               <if test='sVinNo != null and sVinNo != ""'>
			                                        AND C.VIN_NO LIKE '%'||#{sVinNo}||'%'
			                               </if>
			                               <if test='sDlrCd != null and sDlrCd != ""'>
			                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 start  -->
			                                        <!-- AND C.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') -->
			                                        AND (C.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') OR C.ORD_DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%'))
			                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 end  -->
			                               </if>
			                                    
			                           ) A,
			                           (
			                              SELECT T1.CAR_ID,MAX(NVL(T1.CERT_FSTS,0)+NVL(T1.CERT_2NDS,0)) CERT_COUNT FROM (
			                               SELECT 
			                                   T.CAR_ID
			                                   ,CASE WHEN TO_NUMBER(NVL(T.CERT_FST,0)) !=1  THEN 0 ELSE 1  END AS  CERT_FSTS
			                                   ,CASE WHEN TO_NUMBER(NVL(T.CERT_2ND,0)) !=1  THEN 0 ELSE 1  END AS  CERT_2NDS
			                                   FROM SA_0501T T
			                                  WHERE 1=1
					                               <if test='sVinNo != null and sVinNo != ""'>
					                                        AND T.VIN_NO LIKE '%'||#{sVinNo}||'%'
					                               </if>
					                               <if test='sDlrCd != null and sDlrCd != ""'>
			                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 start  -->
					                                        <!-- AND T.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') -->
					                                        AND (T.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') OR T.ORD_DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%'))
			                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 END  -->
					                               </if>
			                             ) T1 
			                               GROUP BY T1.CAR_ID
			                            ) B
			                          WHERE A.CAR_ID = B.CAR_ID 
			                            AND (NVL(A.CERT_FSTM,0)+NVL(A.CERT_2NDM,0)) = B.CERT_COUNT
					                      <if test='sVinNo != null and sVinNo != ""'>
					                           AND A.VIN_NO LIKE '%'||#{sVinNo}||'%'
					                      </if>
					                      <if test='sDlrCd != null and sDlrCd != ""'>
					                      <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 start  -->
					                          <!-- AND A.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') -->
					                          AND (A.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') OR A.ORD_DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%'))
					                      <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 END  -->
					                      </if>
			                            AND B.CERT_COUNT > 0
		                      )
		                         WHERE  NO = 1
                         ORDER BY RECEIPT_ISS_DT DESC
                      ) D   ON D.VIN_NO = A.VIN_NO1 || A.VIN_NO2   AND D.RECEIPT_NO IS NOT NULL 
                       LEFT OUTER JOIN (
                                         SELECT A.*
                                           FROM SA_0502T A
                                          INNER JOIN(SELECT CAR_ID, MAX(SEQ) AS SEQ
                                                       FROM SA_0502T
                                                      GROUP BY CAR_ID
                                                     ) B
                                             ON A.CAR_ID = B.CAR_ID
                                            AND A.SEQ = B.SEQ
                                       ) E
                         ON E.VIN_NO = A.VIN_NO1||A.VIN_NO2
                        AND E.RECEIPT_NO IS NOT NULL
          <!-- 20201224 Q20122300005 增加筛选条件“是否有发票” ,关联发票表 update by sunzq3 end -->
          WHERE B.NCAR_DSTIN_CD = 'N'
         <if test='sReqStatCd != null and sReqStatCd != ""'>
            AND A.REQ_STAT_CD = #{sReqStatCd}
         </if>
         <if test='sRegStartDt != null and sRegStartDt != null'>
           AND A.REQ_DT <![CDATA[>=]]> TRUNC(#{sRegStartDt},'DD')
         </if>
         <if test='sRegEndDt != null and sRegEndDt != null'>
           AND A.REQ_DT <![CDATA[<]]> TRUNC(#{sRegEndDt},'DD')+1
         </if>
         <if test='sApproveStratDt != null and sApproveStratDt != null'>
           AND A.APPROVE_DT <![CDATA[>=]]> TRUNC(#{sApproveStratDt},'DD')
         </if>
         <if test='sApproveEndDt != null and sApproveEndDt != null'>
           AND A.APPROVE_DT <![CDATA[<]]> TRUNC(#{sApproveEndDt},'DD')+1
         </if>
         <if test='sDiviCd != null and sDiviCd != ""'>
            AND C.SDPT_CD = #{sDiviCd}
         </if>
         <if test='sOffCd != null and sOffCd != ""'>
            AND C.DIST_OFFICE_CD = #{sOffCd}
         </if>
         <if test='sDlrCd != null and sDlrCd != ""'>
            AND A.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%')
         </if>
         <if test='sCarlineCd != null and sCarlineCd != ""'>
            AND B.CARLINE_CD = #{sCarlineCd}
         </if>
         <if test='sModelCd != null and sModelCd != ""'>
            AND B.MODEL_CD = #{sModelCd}
         </if>
         <if test='sVinNo != null and sVinNo != ""'>
            AND B.VIN_NO LIKE '%'||#{sVinNo}||'%'
         </if>
         <!-- 20201224 Q20122300005 增加筛选条件“是否有发票” update by sunzq3 start -->
		 <if test='sReceipYn == "N"'>
        	AND D.RECEIPT_NO IS NULL
         </if>
         <if test='sReceipYn == "Y"'>
            AND D.RECEIPT_NO IS NOT NULL
         </if>
       	 <!-- 20201224 Q20122300005 增加筛选条件“是否有发票” update by sunzq3 end -->
    </select>

    <!-- 강제판매승인 조회 목록  -->
    <select id="selectCoercionApprovalsByCondition" parameterType="CoercionApprovalSearchVO" resultType="CoercionApprovalVO">
    SELECT T2.*
      FROM (SELECT T1.*
                  ,ROWNUM AS RONUM
              FROM (

                    SELECT A.SEQ AS SEQ
                         , A.REQ_STAT_CD
                         , FN_CMM_CD_NM('SAL154',A.REQ_STAT_CD,'zh','N') AS REQ_STAT_NM
                         , A.DLR_CD
                         , C.DLR_NM
                         , C.SDPT_CD
                         , (SELECT DIVI_NM FROM CM_2501T WHERE DIVI_CD = C.SDPT_CD) AS SDPT_NM
                         , C.DIST_OFFICE_CD
                         , (SELECT OFF_NM
                              FROM CM_2601T
                             WHERE OFF_CD = C.DIST_OFFICE_CD
                               AND DIVI_CD = C.SDPT_CD) AS DIST_OFFICE_NM
                         , A.REQ_DT
                         , A.FCE_SALE_REQ_REASON_CD
                         , FN_GET_CARLINE_NM_NC(B.CARLINE_CD) AS CARLINE_NM
                         , FN_GET_MODEL_TP_NM(B.MODEL_CD, B.OCN_CD) AS MODEL_NM
                         , B.VIN_NO
                         , A.VIN_NO1
                         , A.VIN_NO2
                         , A.RFID_NO
                         , A.APPROVE_YN
                         , A.FILE_DOC_NO
                         ,(SELECT FN_GET_USER_NM(Y.CONTRACT_CUST_NO) FROM SA_0201T Y WHERE Y.CONTRACT_NO = A.CONTRACT_NO AND Y.DLR_CD = A.DLR_CD) AS REG_USR_ID
                         , A.CONTRACT_NO
                         ,(SELECT X.ORD_TP FROM SA_0121T X WHERE X.VIN_NO1 = A.VIN_NO1 AND X.VIN_NO2 = A.VIN_NO2) AS ORD_TP
                         ,(SELECT Y.SALE_EMP_NO FROM SA_0201T Y WHERE Y.CONTRACT_NO = A.CONTRACT_NO AND Y.DLR_CD = A.DLR_CD) AS SALE_EMP_NO
                         , A.APPROVE_DT
                         , D.RECEIPT_NO     AS CAR_TAX_RECEIPT_NO
                         , D.RECEIPT_ISS_DT AS CAR_TAX_RECEIPT_ISS_DT
                         , D.TAXPAYER_ID_CD AS CAR_TAX_TAXPAYER_ID_CD
                         , E.RECEIPT_NO     AS ETC_TAX_RECEIPT_NO
                         , E.RECEIPT_ISS_DT AS ETC_TAX_RECEIPT_ISS_DT
                         , E.TAXPAYER_ID_CD AS ETC_TAX_TAXPAYER_ID_CD
                      FROM SA_0421T A
                      INNER JOIN (SELECT DLR_CD, VIN_NO1, VIN_NO2
                                       , MAX(SEQ) AS SEQ
                                    FROM SA_0421T
                                   GROUP BY DLR_CD, VIN_NO1, VIN_NO2
                                 ) A1
                         ON A.DLR_CD = A1.DLR_CD
                        AND A.VIN_NO1 = A1.VIN_NO1
                        AND A.VIN_NO2 = A1.VIN_NO2
                        AND A.SEQ = A1.SEQ
                      INNER JOIN SA_0121T B
                         ON A.VIN_NO1 = B.VIN_NO1
                        AND A.VIN_NO2 = B.VIN_NO2
                      INNER JOIN CM_0101T C
                         ON A.DLR_CD = C.DLR_CD
                       <!--  LEFT OUTER JOIN SA_0501T D
                         ON D.VIN_NO = A.VIN_NO1||A.VIN_NO2
                        AND D.RECEIPT_NO IS NOT NULL
                        -->
                      <!-- CRS 清单  NO 33 dcs出库审批管理 异常申请审批，有机动车统一销售发票相关的几个字段展示 1、车辆对应的发票，只有初审通过状态，没有复核通过的情况，那就以最新审核通过展示；2、有复核通过的发票，那就展示最新复核通过的。贾明 2019-11-28 start -->
                      LEFT OUTER JOIN (
		                        SELECT * FROM (
			                           SELECT 
			                               A.*
			                               , ROW_NUMBER() OVER(PARTITION BY A.VIN_NO ORDER BY A.RECEIPT_ISS_DT DESC) NO
			                            FROM (    
			                              SELECT 
			                               C.*
			                              ,CASE WHEN TO_NUMBER(NVL(C.CERT_FST,0)) !=1  THEN 0 ELSE 1  END AS CERT_FSTM
			                              ,CASE WHEN TO_NUMBER(NVL(C.CERT_2ND,0)) !=1  THEN 0 ELSE 1 END  AS CERT_2NDM
			                              FROM SA_0501T C 
			                               WHERE   1=1
			                               <if test='sVinNo != null and sVinNo != ""'>
			                                        AND C.VIN_NO LIKE '%'||#{sVinNo}||'%'
			                               </if>
			                               <if test='sDlrCd != null and sDlrCd != ""'>
			                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 start  -->
			                                        <!-- AND C.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') -->
			                                        AND (C.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') OR C.ORD_DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%'))
			                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 end  -->
			                               </if>
			                                    
			                           ) A,
			                           (
			                              SELECT T1.CAR_ID,MAX(NVL(T1.CERT_FSTS,0)+NVL(T1.CERT_2NDS,0)) CERT_COUNT FROM (
			                               SELECT 
			                                   T.CAR_ID
			                                   ,CASE WHEN TO_NUMBER(NVL(T.CERT_FST,0)) !=1  THEN 0 ELSE 1  END AS  CERT_FSTS
			                                   ,CASE WHEN TO_NUMBER(NVL(T.CERT_2ND,0)) !=1  THEN 0 ELSE 1  END AS  CERT_2NDS
			                                   FROM SA_0501T T
			                                  WHERE 1=1
					                               <if test='sVinNo != null and sVinNo != ""'>
					                                        AND T.VIN_NO LIKE '%'||#{sVinNo}||'%'
					                               </if>
					                               <if test='sDlrCd != null and sDlrCd != ""'>
					                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 start  -->
					                                        <!-- AND T.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') -->
					                                        AND (T.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') OR T.ORD_DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%'))
					                               <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 END  -->
					                               </if>
			                             ) T1 
			                               GROUP BY T1.CAR_ID
			                            ) B
			                          WHERE A.CAR_ID = B.CAR_ID 
			                            AND (NVL(A.CERT_FSTM,0)+NVL(A.CERT_2NDM,0)) = B.CERT_COUNT
					                      <if test='sVinNo != null and sVinNo != ""'>
					                           AND A.VIN_NO LIKE '%'||#{sVinNo}||'%'
					                      </if>
					                      <if test='sDlrCd != null and sDlrCd != ""'>
					                      <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 start  -->
					                          <!-- AND A.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') -->
					                          AND (A.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%') OR A.ORD_DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%'))
					                      <!--20201230 查询条件“经销商代码”也要关联“他店上传的情况 Q20123000004 update by sunzq3 end  -->
					                      </if>
			                            AND B.CERT_COUNT > 0
		                      )
		                         WHERE  NO = 1
                         ORDER BY RECEIPT_ISS_DT DESC
                      ) D   ON D.VIN_NO = A.VIN_NO1 || A.VIN_NO2   AND D.RECEIPT_NO IS NOT NULL 
      <!-- CRS 清单  NO 33 dcs出库审批管理 异常申请审批，有机动车统一销售发票相关的几个字段展示 1、车辆对应的发票，只有初审通过状态，没有复核通过的情况，那就以最新审核通过展示；2、有复核通过的发票，那就展示最新复核通过的。贾明 2019-11-28 end -->
                       LEFT OUTER JOIN (
                                         SELECT A.*
                                           FROM SA_0502T A
                                          INNER JOIN(SELECT CAR_ID, MAX(SEQ) AS SEQ
                                                       FROM SA_0502T
                                                      GROUP BY CAR_ID
                                                     ) B
                                             ON A.CAR_ID = B.CAR_ID
                                            AND A.SEQ = B.SEQ
                                       ) E
                         ON E.VIN_NO = A.VIN_NO1||A.VIN_NO2
                        AND E.RECEIPT_NO IS NOT NULL
                      WHERE B.NCAR_DSTIN_CD = 'N'
                     <if test='sReqStatCd != null and sReqStatCd != ""'>
                        AND A.REQ_STAT_CD = #{sReqStatCd}
                     </if>
                     <if test='sRegStartDt != null and sRegStartDt != null'>
                       AND A.REQ_DT <![CDATA[>=]]> TRUNC(#{sRegStartDt},'DD')
                     </if>
                     <if test='sRegEndDt != null and sRegEndDt != null'>
                       AND A.REQ_DT <![CDATA[<]]> TRUNC(#{sRegEndDt},'DD')+1
                     </if>
                     <if test='sApproveStratDt != null and sApproveStratDt != null'>
                       AND A.APPROVE_DT <![CDATA[>=]]> TRUNC(#{sApproveStratDt},'DD')
                     </if>
                     <if test='sApproveEndDt != null and sApproveEndDt != null'>
                       AND A.APPROVE_DT <![CDATA[<]]> TRUNC(#{sApproveEndDt},'DD')+1
                     </if>
                     <if test='sDiviCd != null and sDiviCd != ""'>
                        AND C.SDPT_CD = #{sDiviCd}
                     </if>
                     <if test='sOffCd != null and sOffCd != ""'>
                        AND C.DIST_OFFICE_CD = #{sOffCd}
                     </if>
                     <if test='sDlrCd != null and sDlrCd != ""'>
                        AND A.DLR_CD LIKE UPPER('%'||#{sDlrCd}||'%')
                     </if>
                     <if test='sCarlineCd != null and sCarlineCd != ""'>
                        AND B.CARLINE_CD = #{sCarlineCd}
                     </if>
                     <if test='sModelCd != null and sModelCd != ""'>
                        AND B.MODEL_CD = #{sModelCd}
                     </if>
                     <if test='sVinNo != null and sVinNo != ""'>
                        AND B.VIN_NO LIKE '%'||#{sVinNo}||'%'
                     </if>
                     <!-- 20201224 Q20122300005 增加筛选条件“是否有发票” update by sunzq3 start -->
                      <if test='sReceipYn == "N"'>
                        AND D.RECEIPT_NO IS NULL
                      </if>
                      <if test='sReceipYn == "Y"'>
                        AND D.RECEIPT_NO IS NOT NULL
                      </if>
                     <!-- 20201224 Q20122300005 增加筛选条件“是否有发票” update by sunzq3 end -->
                      ORDER BY
                      <choose>
                          <when test='sort != null'>
                              <foreach item="item" index="index" collection="sort" open="" separator="," close="">
                                  <choose>
                                      <when test='item.field == "reqStatCd"'>A.REQ_STAT_CD <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "dlrCd"'>A.DLR_CD <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "dlrNm"'>C.DLR_NM <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "reqDt"'>A.REQ_DT <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "fceSaleReqReasonCd"'>A.FCE_SALE_REQ_REASON_CD <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "carlineCd"'>B.CARLINE_CD <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "vinNo"'>B.VIN_NO <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "rfidNo"'>A.RFID_NO <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <when test='item.field == "approveYn"'>A.APPROVE_YN <choose><when test='item.dir == "asc"'>ASC</when><otherwise>DESC</otherwise></choose></when>
                                      <otherwise>
                                          A.DLR_CD ASC, A.REQ_DT DESC
                                      </otherwise>
                                  </choose>
                               </foreach>
                          </when>
                          <otherwise>
                                  A.DLR_CD ASC, A.REQ_DT DESC
                          </otherwise>
                      </choose>

                )T1
                <where>
                <if test='firstIndex != -1 and lastIndex != -1'>
                    ROWNUM <![CDATA[<=]]> #{lastIndex}
                </if>
            </where>

        ) T2
        <where>
            <if test='firstIndex != -1 and lastIndex != -1'>
                RONUM > #{firstIndex}
            </if>
        </where>
        ORDER BY RONUM
    </select>

    <!-- 신청한 RFID번호가 차량마스터의 RFID 번호와 동일여부 체크  -->
    <select id="selectIsRfidnoCnt" parameterType="CoercionApprovalSearchVO" resultType="int">
        SELECT COUNT(*)
          FROM SA_0121T A       /* 차량 마스터 */
         INNER JOIN (
                     SELECT VIN_NO1
                          , VIN_NO2
                          , RFID_NO
                       FROM SA_0421T
                      WHERE DLR_CD  = #{sDlrCd}
                        AND VIN_NO1 = #{sVinNo1}
                        AND VIN_NO2 = #{sVinNo2}
                        AND SEQ     = #{sSeq}
                    ) B
            ON A.VIN_NO1 = B.VIN_NO1
           AND A.VIN_NO2 = B.VIN_NO2
         WHERE A.NCAR_DSTIN_CD = 'N'    -- 신차
           AND A.RFID_NO = B.RFID_NO
           AND A.RFID_NO IS NOT NULL
    </select>

    <!-- 강제판매 승인/불승인 처리 -->
    <update id="updateCoercionAppr" parameterType="CoercionApprovalVO">
        UPDATE SA_0421T
           SET REQ_STAT_CD = #{reqStatCd}
             , APPROVE_DT = SYSDATE
             , APPROVE_ID = #{updtUsrId}
             , APPROVE_YN = 'Y'
             , UPDT_USR_ID = #{updtUsrId}
             , UPDT_DT = SYSDATE
         WHERE DLR_CD  = #{dlrCd}
           AND VIN_NO1 = #{vinNo1}
           AND VIN_NO2 = #{vinNo2}
           AND SEQ     = #{seq}
    </update>

    <!-- 강제판매처리결과송신  프로시져  -->
    <update id="procCoercionAppr" parameterType="CoercionApprovalVO" statementType="CALLABLE">
        {CALL SP_SAL_DCS_P_0421T_IF(
              'SAL074'
            , #{dlrCd, mode=IN, jdbcType=VARCHAR}
            , #{vinNo1, mode=IN, jdbcType=VARCHAR}
            , #{vinNo2, mode=IN, jdbcType=VARCHAR}
            , #{seq, mode=IN, jdbcType=NUMERIC}
        )}
    </update>

</mapper>